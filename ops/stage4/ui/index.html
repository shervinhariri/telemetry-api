<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Telemetry</title>
  <style>
    .version-dot {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      font-weight: 500;
      color: var(--muted);
    }
    .version-dot .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #22c55e;
      transition: background-color 0.3s;
    }
    .version-dot.update-available .dot {
      background: #f59e0b;
    }
  </style>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg:#0b0f1a; --surface:#0f172a; --card:#111729; --ink:#e6edf3; --muted:#9fb3c8;
      --brand:#8b5cf6; --ok:#34d399; --warn:#f59e0b; --err:#fb7185; --accent:#60a5fa;
      --line:#1e293b; --glow: rgba(139,92,246,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--ink)}
    .wrap{max-width:1200px;margin:28px auto;padding:0 16px}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
    .title{font-size:22px;font-weight:700;letter-spacing:.2px}
    .pill{background:linear-gradient(135deg, #0b1224, #0c1730);border:1px solid #1f2a44;color:var(--muted);padding:8px 12px;border-radius:999px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .tabs{display:flex;gap:8px;margin:10px 0 18px}
    .tab{padding:10px 14px;border-radius:12px;background:#0c1324;border:1px solid #1d2842;color:var(--muted);cursor:pointer}
    .tab.active{background:linear-gradient(135deg, rgba(139,92,246,.15), rgba(96,165,250,.15));color:var(--ink);border-color:#2c3c63;box-shadow:0 0 0 1px #2c3c63,0 8px 28px rgba(0,0,0,.35),0 0 40px var(--glow)}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media (min-width: 900px){ .grid{grid-template-columns:repeat(3,1fr)} }
    .card{background:var(--card);border:1px solid #1d2842;border-radius:16px;padding:16px;box-shadow:0 12px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)}
    .kpi{display:flex;align-items:center;justify-content:space-between}
    .kpi h3{margin:0 0 6px;font-size:13px;color:var(--muted);font-weight:500}
    .kpi .big{font-size:28px;font-weight:800;letter-spacing:.3px}
    .spark{height:28px;width:120px}
    .panel{display:none}
    .panel.active{display:block}
    label{display:block;font-size:12px;color:var(--muted);margin:10px 0 6px}
    input,textarea,select{width:100%;padding:10px 12px;border-radius:12px;background:#0c1324;color:var(--ink);border:1px solid #1d2842;outline:none}
    button{display:inline-flex;align-items:center;gap:8px;border:none;background:linear-gradient(135deg,var(--brand),var(--accent));color:#07101e;font-weight:800;padding:10px 14px;border-radius:12px;cursor:pointer}
    .mutebtn{background:#0c1324;color:var(--ink);border:1px solid #263455}
    .split{display:grid;grid-template-columns:1fr;gap:14px}
    @media (min-width: 900px){ .split{grid-template-columns:2fr 1fr} }
    .small{font-size:12px;color:var(--muted)}
    .log{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;background:#0c1324;border:1px solid #1d2842;border-radius:12px;padding:10px;height:170px;overflow:auto}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .err{color:var(--err)}
    .footer{margin:16px 0 0;color:var(--muted);font-size:12px}
    .inline{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .right{margin-left:auto}
    
    /* Status chip styling */
    .status-chip{display:flex;align-items:center;gap:6px;padding:4px 8px;border-radius:6px;background:#0c1324;border:1px solid #1d2842;font-size:12px}
    .status-dot{width:6px;height:6px;border-radius:50%;background:#9fb3c8}
    .status-dot.online{background:#34d399}
    .status-dot.offline{background:#fb7185}
    .version-text{font-size:12px;color:var(--muted);margin-left:12px}
    
    /* Status codes styling */
    .status-codes{display:flex;gap:8px;font-size:12px}
    .status-2xx{color:#10b981}
    .status-4xx{color:#f59e0b}
    .status-5xx{color:#ef4444}
    
    /* Filters styling */
    .filters{display:flex;gap:8px;flex-wrap:wrap}
    .filter{padding:4px 8px;border:1px solid #1d2842;border-radius:4px;background:#0c1324;color:var(--ink);font-size:12px}
    
    /* Table styling */
    .table-container{max-height:400px;overflow-y:auto;border:1px solid #1d2842;border-radius:4px}
    .data-table{width:100%;border-collapse:collapse;font-size:12px}
    .data-table th{background:#0c1324;padding:8px;text-align:left;border-bottom:1px solid #1d2842;position:sticky;top:0;z-index:1}
    .data-table td{padding:6px 8px;border-bottom:1px solid #1d2842}
    .data-table tr:hover{background:#0c1324}
    
    /* Status badges */
    .status-badge{padding:2px 6px;border-radius:3px;font-size:11px;font-weight:500}
    .status-200{background:#dcfce7;color:#166534}
    .status-400{background:#fef3c7;color:#92400e}
    .status-429{background:#fef3c7;color:#92400e}
    .status-500{background:#fee2e2;color:#991b1b}
    
    /* Result badges */
    .result-ok{background:#dcfce7;color:#166534}
    .result-rate_limited{background:#fef3c7;color:#92400e}
    .result-error{background:#fee2e2;color:#991b1b}
    
    /* Pagination */
    .pagination{display:flex;align-items:center;justify-content:center;gap:12px}
    
    /* Drawer styling */
    .drawer {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100vh;
      background: var(--card);
      border-left: 1px solid var(--line);
      transition: right 0.3s ease;
      z-index: 1000;
      overflow-y: auto;
    }
    .drawer.open {
      right: 0;
    }
    .drawer-header {
      padding: 16px;
      border-bottom: 1px solid var(--line);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .drawer-close {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 18px;
    }
    .drawer-content {
      padding: 16px;
    }
    .drawer-section {
      margin-bottom: 20px;
    }
    .drawer-section h4 {
      margin: 0 0 8px;
      font-size: 14px;
      color: var(--muted);
      font-weight: 500;
    }
    .drawer-section pre {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 8px;
      font-size: 11px;
      overflow-x: auto;
      margin: 0;
    }
    
    /* State cards styling */
    .state-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }
    .state-card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 16px;
      text-align: center;
    }
    .state-card .value {
      font-size: 24px;
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 4px;
    }
    .state-card .label {
      font-size: 12px;
      color: var(--muted);
      font-weight: 500;
    }
    
    /* Performance chart styling */
    .performance-chart {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .chart-container {
      height: 200px;
      position: relative;
    }
    .drawer{position:fixed;top:0;right:0;width:400px;height:100vh;background:var(--card);border-left:1px solid #1d2842;z-index:1000;transform:translateX(100%);transition:transform 0.3s ease}
    .drawer.open{transform:translateX(0)}
    .drawer-header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #1d2842}
    .drawer-content{padding:16px;overflow-y:auto;height:calc(100vh - 60px)}
    .drawer-content h4{margin:0 0 8px;color:var(--muted);font-size:14px}
    .drawer-content pre{background:#0c1324;border:1px solid #1d2842;border-radius:8px;padding:12px;overflow-x:auto;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
  <div class="inline">
    <div class="title">ðŸš€ Telemetry</div>
  </div>
  <div class="inline right">
    <div id="statusChip" class="status-chip">
      <div class="status-dot"></div>
      <span id="statusText">Checking...</span>
    </div>
    <label for="key" class="small">API Key</label>
    <input id="key" style="min-width:220px" placeholder="Enter API key" />
    <div id="versionText" class="version-text">Version: Loading...</div>
  </div>
</div>

    <div class="tabs">
      <div class="tab active" data-tab="dashboard">Dashboard</div>
      <div class="tab" data-tab="requests">Requests</div>
      <div class="tab" data-tab="ingest">Ingest Test</div>
      <div class="tab" data-tab="outputs">Outputs</div>
      <div class="tab" data-tab="lookup">Lookup</div>
      <div class="tab" data-tab="logs">Logs</div>
      <div class="tab" data-tab="system">System</div>
    </div>

    <!-- DASHBOARD -->
    <div class="panel active" id="panel-dashboard">
      <!-- Performance Chart -->
      <div class="performance-chart">
        <h3>Throughput (events/sec) - Last 15 minutes</h3>
        <div class="chart-container">
          <canvas id="throughput-chart"></canvas>
        </div>
      </div>
      
      <!-- State Cards -->
      <div class="state-cards">
        <div class="state-card">
          <div class="value" id="queue-lag">â€”</div>
          <div class="label">Queue Lag (records)</div>
        </div>
        <div class="state-card">
          <div class="value" id="avg-risk">â€”</div>
          <div class="label">Avg Risk (0-10)</div>
        </div>
        <div class="state-card">
          <div class="value" id="threat-matches">â€”</div>
          <div class="label">Threat Matches (15m)</div>
        </div>
        <div class="state-card">
          <div class="value" id="error-rate">â€”</div>
          <div class="label">Error Rate (%)</div>
        </div>
      </div>
      
      <!-- Legacy Grid (hidden by default) -->
      <div class="grid" style="display: none;">
        <!-- Row 1: Core Metrics -->
        <div class="card">
          <div class="kpi">
            <div>
              <h3>Events Ingested</h3>
              <div class="big" id="kpi-events">â€”</div>
            </div>
            <svg class="spark" id="spark-events"></svg>
          </div>
        </div>
        <div class="card">
          <div class="kpi">
            <div>
              <h3>Threat Matches</h3>
              <div class="big" id="kpi-threats">â€”</div>
            </div>
            <svg class="spark" id="spark-threats"></svg>
          </div>
        </div>
        <div class="card">
          <div class="kpi">
            <div>
              <h3>Avg Risk</h3>
              <div class="big" id="kpi-risk">â€”</div>
            </div>
            <svg class="spark" id="spark-risk"></svg>
          </div>
        </div>
        
        <!-- Row 2: Request Metrics -->
        <div class="card">
          <div class="kpi">
            <div>
              <h3>Requests (15m)</h3>
              <div class="big" id="kpi-requests">â€”</div>
            </div>
            <svg class="spark" id="spark-requests"></svg>
          </div>
        </div>
        <div class="card">
          <div class="kpi">
            <div>
              <h3>Status Codes</h3>
              <div class="status-codes" id="status-codes">
                <span class="status-2xx">2xx: â€”</span>
                <span class="status-4xx">4xx: â€”</span>
                <span class="status-5xx">5xx: â€”</span>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="kpi">
            <div>
              <h3>P95 Latency</h3>
              <div class="big" id="kpi-latency">â€”</div>
            </div>
            <svg class="spark" id="spark-latency"></svg>
          </div>
        </div>
        <div class="card">
          <div class="kpi">
            <div>
              <h3>Active Clients</h3>
              <div class="big" id="kpi-clients">â€”</div>
            </div>
            <svg class="spark" id="spark-clients"></svg>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:14px">
        <div class="inline" style="justify-content:space-between;margin-bottom:8px">
          <h3 style="color:var(--muted);margin:0">Events per Minute</h3>
          <div class="small">Auto-refresh every 5s</div>
        </div>
        <canvas id="eventsChart" height="100"></canvas>
      </div>
    </div>

    <!-- REQUESTS -->
    <div class="panel" id="panel-requests">
      <!-- State Cards -->
      <div class="state-cards">
        <div class="state-card">
          <div class="value" id="total-requests">â€”</div>
          <div class="label">Total Requests (15m)</div>
        </div>
        <div class="state-card">
          <div class="value" id="succeeded-requests">â€”</div>
          <div class="label">Succeeded (2xx)</div>
        </div>
        <div class="state-card">
          <div class="value" id="failed-requests">â€”</div>
          <div class="label">Failed (4xx/5xx)</div>
        </div>
        <div class="state-card">
          <div class="value" id="avg-latency">â€”</div>
          <div class="label">Avg Latency (ms)</div>
        </div>
      </div>
      
      <div class="card">
        <div class="inline" style="justify-content:space-between;margin-bottom:16px">
          <h3 style="color:var(--muted);margin:0">Request Audit Log</h3>
          <div class="inline">
            <select id="windowSelect" style="width:auto;padding:4px 8px;font-size:12px;margin-right:8px">
              <option value="15m">15m</option>
              <option value="1h">1h</option>
              <option value="24h" selected>24h</option>
            </select>
            <button id="btnLiveTail" class="mutebtn">Live Tail</button>
            <button id="btnExportCSV" class="mutebtn">Export CSV</button>
            <div class="small">Auto-refresh every 5s</div>
          </div>
        </div>
        
        <!-- Empty state -->
        <div id="emptyState" style="display:none;text-align:center;padding:40px;color:var(--muted)">
          <h4>No requests in the selected window</h4>
          <p>Send a sample from Ingest Test to see events here.</p>
          <button class="mutebtn" onclick="showPanel('ingest')">Open Ingest Test</button>
        </div>
        
        <!-- Filters -->
        <div class="filters" style="margin-bottom:16px">
          <select id="filterMethod" class="filter">
            <option value="">All Methods</option>
            <option value="GET">GET</option>
            <option value="POST">POST</option>
            <option value="PUT">PUT</option>
            <option value="DELETE">DELETE</option>
          </select>
          <select id="filterStatus" class="filter">
            <option value="">All Status</option>
            <option value="200">200 OK</option>
            <option value="400">400 Bad Request</option>
            <option value="401">401 Unauthorized</option>
            <option value="429">429 Rate Limited</option>
            <option value="500">500 Server Error</option>
          </select>
          <select id="filterEndpoint" class="filter">
            <option value="">All Endpoints</option>
            <option value="/v1/ingest">/v1/ingest</option>
            <option value="/v1/metrics">/v1/metrics</option>
            <option value="/v1/health">/v1/health</option>
            <option value="/v1/lookup">/v1/lookup</option>
          </select>
          <input id="filterIP" class="filter" placeholder="Client IP" />
          <input id="filterAPIKey" class="filter" placeholder="API Key prefix" />
        </div>
        
        <!-- Requests Table -->
        <div class="table-container">
          <table id="requestsTable" class="data-table">
            <thead>
              <tr>
                <th>Time</th>
                <th>Method</th>
                <th>Path</th>
                <th>Status</th>
                <th>Latency (ms)</th>
                <th>Source IP</th>
                <th>Records</th>
                <th>Risk Avg</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="requestsTableBody">
              <!-- Data will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <!-- Pagination -->
        
        <!-- Right-side Drawer for Request Details -->
        <div id="request-drawer" class="drawer">
          <div class="drawer-header">
            <h3>Request Details</h3>
            <button class="drawer-close" onclick="closeRequestDrawer()">&times;</button>
          </div>
          <div class="drawer-content">
            <div class="drawer-section">
              <h4>Request ID</h4>
              <div id="drawer-request-id">â€”</div>
            </div>
            
            <div class="drawer-section">
              <h4>Timestamps</h4>
              <div id="drawer-timestamps">â€”</div>
            </div>
            
            <div class="drawer-section">
              <h4>Request Headers</h4>
              <pre id="drawer-headers">â€”</pre>
            </div>
            
            <div class="drawer-section">
              <h4>Payload Summary</h4>
              <pre id="drawer-payload">â€”</pre>
            </div>
            
            <div class="drawer-section">
              <h4>Enrichment Results</h4>
              <pre id="drawer-enrichment">â€”</pre>
            </div>
            
            <div class="drawer-section">
              <h4>Export Actions</h4>
              <pre id="drawer-exports">â€”</pre>
            </div>
            
            <div class="drawer-section">
              <h4>Errors/Exceptions</h4>
              <pre id="drawer-errors">â€”</pre>
            </div>
            
            <div class="drawer-section">
              <button onclick="openRawJson()" class="mutebtn">Open Raw JSON</button>
            </div>
          </div>
        </div>
        <div class="pagination" style="margin-top:16px">
          <button id="btnPrevPage" class="mutebtn">Previous</button>
          <span id="pageInfo">Page 1 of 1</span>
          <button id="btnNextPage" class="mutebtn">Next</button>
        </div>
        
        <!-- Request Details Drawer -->
        <div id="requestDetailsDrawer" class="drawer" style="display:none">
          <div class="drawer-header">
            <h3>Request Details</h3>
            <button id="btnCloseDrawer" class="mutebtn">Ã—</button>
          </div>
          <div class="drawer-content">
            <div id="requestDetailsContent">
              <!-- Details will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- INGEST TEST -->
    <div class="panel" id="panel-ingest">
      <div class="split">
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Sample Batch (JSON)</h3>
          <textarea id="ingestBody" rows="12">[
  {"ts": 1723290000, "src_ip": "10.0.0.10", "dst_ip": "1.1.1.1", "src_port": 12345, "dst_port": 53, "proto":"udp", "bytes": 84, "packets": 1, "app":"dns"}
]</textarea>
          <div class="row" style="margin-top:10px">
            <button id="btnIngest">POST /v1/ingest</button>
            <button class="mutebtn" id="btnIngestClear">Clear Log</button>
          </div>
        </div>
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Response</h3>
          <pre class="log" id="ingestLog"></pre>
        </div>
      </div>
    </div>

    <!-- OUTPUTS -->
    <div class="panel" id="panel-outputs">
      <div class="split">
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Configure Splunk Output</h3>
          <label>HEC URL</label>
          <input id="splunkUrl" placeholder="https://splunk.example.com:8088/services/collector" />
          <label>HEC Token</label>
          <input id="splunkToken" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" />
          <div class="row" style="margin-top:10px">
            <button id="btnSaveSplunk">Save</button>
            <button id="btnTestSplunk" class="mutebtn">Test</button>
          </div>
          <pre class="log" id="splunkLog"></pre>
        </div>

        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Configure Elastic Output</h3>
          <label>Elasticsearch URL</label>
          <input id="esUrl" placeholder="https://es.example.com:9200" />
          <label>Index</label>
          <input id="esIndex" placeholder="telemetry-events" value="telemetry-events" />
          <label>Username</label>
          <input id="esUser" placeholder="elastic" />
          <label>Password</label>
          <input id="esPass" type="password" placeholder="********" />
          <div class="row" style="margin-top:10px">
            <button id="btnSaveElastic">Save</button>
            <button id="btnTestElastic" class="mutebtn">Test</button>
          </div>
          <pre class="log" id="elasticLog"></pre>
        </div>
      </div>
    </div>

    <!-- LOOKUP -->
    <div class="panel" id="panel-lookup">
      <div class="card">
        <div class="row">
          <div style="flex:1">
            <label>IP / Domain</label>
            <input id="lookupValue" placeholder="8.8.8.8" value="8.8.8.8" />
          </div>
          <div style="width:180px">
            <label>Type</label>
            <select id="lookupType">
              <option value="ip">ip</option>
              <option value="domain">domain</option>
            </select>
          </div>
        </div>
        <div class="row" style="margin-top:10px">
          <button id="btnLookup">POST /v1/lookup</button>
        </div>
        <pre class="log" id="lookupLog"></pre>
      </div>
    </div>

    <!-- LOGS -->
    <div class="panel" id="panel-logs">
      <div class="split">
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Live Tail</h3>
          <pre class="log" id="logsTail" style="height:300px;font-size:11px;line-height:1.4">Loading logs...</pre>
          <div class="row" style="margin-top:10px">
            <button id="btnRefreshLogs">Refresh</button>
            <button class="mutebtn" id="btnClearLogs">Clear</button>
          </div>
        </div>
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Download & Upload</h3>
          <div class="row" style="margin-top:10px">
            <button id="btnDownloadLogs">Download 2MB</button>
            <button class="mutebtn" id="btnUploadLogs">Upload File</button>
          </div>
          <input type="file" id="logFileInput" style="display:none" />
          <pre class="log" id="logsUpload" style="height:200px;font-size:11px">Ready for upload.</pre>
        </div>
      </div>
    </div>

    <!-- SYSTEM -->
    <div class="panel" id="panel-system">
      <div class="split">
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">System Info</h3>
          <pre class="log" id="systemLog" style="max-height:380px;overflow:auto;white-space:pre-wrap;word-break:break-word;">Loading system info...</pre>
          <div class="row" style="margin-top:10px">
            <button id="btnSystem">Refresh</button>
            <button class="mutebtn" id="btnCopySystem">Copy</button>
          </div>
        </div>
        <div class="card">
          <h3 style="color:var(--muted);margin-top:0">Raw Metrics</h3>
          <pre class="log" id="metricsLog">Ready.</pre>
          <div class="row" style="margin-top:10px">
            <button class="mutebtn" id="btnMetrics">Fetch /metrics</button>
          </div>
        </div>
      </div>
      <div class="small" id="diagLine" style="margin-top:8px;color:#9fb3c8"></div>
      <div class="footer">System info shows bounded JSON. Raw metrics available for debugging.</div>
    </div>
  </div>

              <script>
          // Global configuration - single source of truth
          window.__CFG__ = {
            API_BASE_URL: 'http://localhost:8080',
            API_PREFIX: '/v1',
            API_KEY: 'TEST_KEY'
          };
        </script>
                  <script src="/ui/lib/normalize.js?v=1.0.10"></script>
          <script src="/ui/api-client.js?v=1.0.10"></script>
          <script src="/ui/app.js?v=1.0.10" defer></script>
  <script>
    // Simple test to see if JavaScript is working
    console.log("Inline script loaded - testing basic functionality");
    document.addEventListener("DOMContentLoaded", () => {
      console.log("DOM Content Loaded - Inline script");
      const tabs = document.querySelectorAll(".tab");
      console.log("Found tabs:", tabs.length);
      
      // Simple tab functionality as backup
      tabs.forEach(tab => {
        tab.addEventListener("click", function() {
          console.log("Tab clicked:", this.dataset.tab);
          // Remove active from all tabs and panels
          document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
          document.querySelectorAll(".panel").forEach(p => p.classList.remove("active"));
          
          // Add active to clicked tab
          this.classList.add("active");
          
          // Show corresponding panel
          const panel = document.getElementById("panel-" + this.dataset.tab);
          if (panel) {
            panel.classList.add("active");
            console.log("Activated panel:", "panel-" + this.dataset.tab);
          }
        });
      });
    });
  </script>
</body>
</html>
